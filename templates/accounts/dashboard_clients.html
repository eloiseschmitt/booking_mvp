{% load modal_tags %}

<section class="kitlast-content-section{% if section == 'clients' %} is-active{% endif %}"
  data-section="clients">
  <header class="kitlast-section-header">
    <div>
      <h2>Gestion des clients</h2>
      <p class="kitlast-section-header__text">Consultez vos clients et gérez leurs informations de contact.</p>
    </div>
    {% if request.user.user_type == 'professional' %}
    <button type="button" class="kitlast-button" data-open-client-modal>Ajouter un client</button>
    {% endif %}
  </header>

  <div class="kitlast-table-wrapper">
    {% if clients %}
    <table class="kitlast-table">
      <thead>
        <tr>
          <th scope="col">Nom &amp; prénom</th>
          <th scope="col">Téléphone</th>
          <th scope="col">Email</th>
          <th scope="col">Modifier</th>
          <th scope="col">Supprimer</th>
        </tr>
      </thead>
      <tbody>
        {% for client in clients %}
        <tr>
          <td data-label="Nom &amp; prénom">{{ client.full_name }}</td>
          <td data-label="Téléphone">{{ client.phone }}</td>
          <td data-label="Email">
            <a href="mailto:{{ client.email }}" class="kitlast-link">{{ client.email }}</a>
          </td>
          <td data-label="Modifier">
            <button type="button" class="kitlast-service-line__action">Modifier</button>
          </td>
          <td data-label="Supprimer">
            <button type="button" class="kitlast-service-line__action kitlast-service-line__action--danger">Supprimer</button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p class="kitlast-empty">Aucun client enregistré pour le moment.</p>
    {% endif %}
  </div>
</section>

{% if request.user.user_type == 'professional' %}
  {% render_modal modal_data_attr='data-client-modal' modal_title='Ajouter un client' modal_title_id='client-modal-title' modal_body_template='accounts/components/modal_client_form.html' modal_should_show=show_client_modal %}
{% endif %}
